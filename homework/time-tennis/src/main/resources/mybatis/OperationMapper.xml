<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lazyman.timetennis.log.OperationMapper">
    <resultMap id="BaseResultMap" type="com.lazyman.timetennis.log.Operation">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="id" jdbcType="INTEGER" property="id"/>
        <result column="operator_id" jdbcType="VARCHAR" property="operatorId"/>
        <result column="description" jdbcType="VARCHAR" property="description"/>
        <result column="update_time" jdbcType="TIMESTAMP" property="updateTime"/>
        <result column="operation_type" jdbcType="VARCHAR" property="operationType"/>
        <association property="operator" javaType="com.lazyman.timetennis.user.User">
            <id column="open_id" jdbcType="VARCHAR" property="openId"/>
            <result column="nickname" jdbcType="VARCHAR" property="nickname"/>
            <result column="wx_nickname" jdbcType="VARCHAR" property="wxNickname"/>
            <result column="avatar" jdbcType="VARCHAR" property="avatar"/>
            <result column="vip" jdbcType="BIT" property="vip"/>
        </association>
    </resultMap>

    <insert id="insert" parameterType="com.lazyman.timetennis.log.Operation">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into operation (id, operator_id, operation_type,description,
        update_time)
        values (#{id,jdbcType=INTEGER}, #{operatorId,jdbcType=VARCHAR},#{operationType}, #{description,jdbcType=VARCHAR},
        #{updateTime,jdbcType=TIMESTAMP})
    </insert>


    <select id="selectAll" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select a.id, a.operator_id,a.operation_type, a.description, a.update_time,b.open_id,b.wx_nickname,b.avatar
        from operation a ,tt_user b where a.operator_id=b.open_id
        <if test="start!=null">and a.update_time &lt; #{start}</if>
        order by a.update_time desc limit 11
    </select>
</mapper>